syntax = "proto3";

package rivet.backend.module;

import "proto/common.proto";
import "proto/backend/module/function.proto";

// MARK: Game Version Config
message VersionConfig {	
	rivet.common.Uuid module_version_id = 1;

	message Fly {
		string vm_size = 1;
	}

	oneof runtime {
		Fly fly = 101;
	};
}

// MARK: Game Version Config Context
message VersionConfigCtx {

}

// MARK: Game Version Config Meta
message VersionConfigMeta {
	message Fly {
		string app_id = 1;
	}

	oneof runtime {
		Fly fly = 101;
	};
}

// General
message Module {
	rivet.common.Uuid module_id = 1;
	rivet.common.Uuid team_id = 2;
	string name_id = 3;
	repeated rivet.backend.module.Function function = 4;

	oneof publicity {
		google.protobuf.Empty public = 101;
		google.protobuf.Empty private = 102;
	}
}

message ModuleVersion {
	rivet.common.Uuid version_id = 1;
	rivet.common.Uuid module_id = 2;

	message DockerImage {
		// TODO: Auth?
		string image_tag = 1;
	}

	oneof image {
		DockerImage docker_image = 1;
	}
}

